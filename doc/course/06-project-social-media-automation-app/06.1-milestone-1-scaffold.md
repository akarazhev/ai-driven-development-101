# M1: Project Scaffold and Environment

Set up the foundation of your social media automation app. This milestone focuses on project structure, development environment, and basic infrastructure.

## Learning objectives

- Set up project structure for full-stack application
- Configure development environment
- Create database schema
- Implement health check endpoint
- Create stub provider for development

## Prerequisites

- Chapters 00-05 completed
- Cursor set up and working
- Your chosen technology stack installed

## Acceptance criteria

- [ ] Project structure created (backend, frontend, tests, docs)
- [ ] Development environment configured
- [ ] Database schema created
- [ ] Health endpoint working (`GET /api/health`)
- [ ] Stub provider implemented
- [ ] Basic models/entities defined

## Step-by-step guide

### Step 1: Plan project structure

**Use AI to help plan**:

```text
Role: Technical architect
Task: Design project structure for a full-stack social media automation app
Constraints:
- Separate backend and frontend
- Include: models, API routes, services, tests, docs
- Follow best practices for [your stack]
- Make it scalable and maintainable
Inputs: [Your technology choices]
Output format: Directory structure with explanations
Evaluation: Structure is clear, organized, and follows conventions
```

**Typical structure**:
```
project/
  backend/
    models/          # Data models
    routes/          # API endpoints
    services/       # Business logic
    providers/      # Social media adapters
    config/         # Configuration
    tests/          # Backend tests
  frontend/
    src/
      components/   # UI components
      pages/        # Page components
      services/     # API clients
      utils/        # Utilities
    tests/          # Frontend tests
  docs/             # Documentation
  README.md
```

### Step 2: Set up backend

**Choose your stack** and set up:

**For Node.js/Express**:
```text
Role: Backend developer
Task: Set up Express.js backend with TypeScript
Constraints:
- Include: Express, TypeScript, testing framework
- Set up project structure
- Configure build scripts
- Add health check endpoint
Inputs: [Project requirements]
Output format: Complete backend setup
```

**For Python/FastAPI**:
```text
Role: Backend developer
Task: Set up FastAPI backend
Constraints:
- Include: FastAPI, SQLAlchemy/SQLModel, Pydantic
- Set up project structure
- Configure development server
- Add health check endpoint
Inputs: [Project requirements]
Output format: Complete backend setup
```

**For Java/Spring Boot**:
```text
Role: Backend developer
Task: Set up Spring Boot application
Constraints:
- Include: Spring Boot, JPA, REST controllers
- Set up project structure (Maven/Gradle)
- Configure application properties
- Add health check endpoint
Inputs: [Project requirements]
Output format: Complete Spring Boot setup
```

### Step 3: Set up database

**Create schema**:

```text
Role: Database architect
Task: Design database schema for social media automation app
Constraints:
- Tables: MediaAsset, Post, PostMedia, Schedule, PublishLog
- Include: relationships, indexes, constraints
- Use [your ORM/framework]
- Include migration files
Inputs: [Data model from main README]
Output format: Schema definition + migration files
Evaluation: Schema supports all requirements
```

**Tables to create**:
- `media_assets`: id, filename, content_type, size, storage_path, alt_text
- `posts`: id, text, created_at, updated_at, author_id
- `post_media`: id, post_id, media_id, position
- `schedules`: id, post_id, scheduled_at, status, attempt_count, last_error
- `publish_logs`: id, post_id, provider, external_id, status, message, created_at

### Step 4: Implement health endpoint

**Create health check**:

```text
Role: Backend developer
Task: Implement health check endpoint
Constraints:
- Endpoint: GET /api/health
- Return: { "status": "ok" }
- Test that it works
- Follow existing API patterns
Inputs: [Backend setup]
Output format: Health endpoint + test
Evaluation: Endpoint returns correct response
```

### Step 5: Create stub provider

**Implement provider interface**:

```text
Role: Software engineer
Task: Create provider adapter pattern with stub implementation
Constraints:
- Define BaseProvider interface with publish() method
- Implement StubProvider that simulates publishing
- Return mock external_id
- Can simulate success/failure
- Follow adapter pattern
Inputs: [Provider requirements]
Output format: Provider interface + stub implementation
Evaluation: Stub provider works and can be swapped later
```

**Interface**:
```text
BaseProvider:
  publish(text: string, media_paths: string[]) -> (external_id: string, message: string)
  get_status(external_id: string) -> status: string
```

### Step 6: Set up frontend

**Choose your framework** and set up:

**For React**:
```text
Role: Frontend developer
Task: Set up React application with TypeScript
Constraints:
- Include: React, TypeScript, routing, API client
- Set up project structure
- Configure build tools
- Add basic layout
Inputs: [Frontend requirements]
Output format: Complete React setup
```

**For Vue**:
```text
Role: Frontend developer
Task: Set up Vue 3 application with TypeScript
Constraints:
- Include: Vue 3, TypeScript, Vue Router, API client
- Set up project structure
- Configure build tools
- Add basic layout
Inputs: [Frontend requirements]
Output format: Complete Vue setup
```

**For Angular**:
```text
Role: Frontend developer
Task: Set up Angular application
Constraints:
- Include: Angular, TypeScript, routing, HTTP client
- Set up project structure
- Configure build
- Add basic layout
Inputs: [Frontend requirements]
Output format: Complete Angular setup
```

### Step 7: Connect frontend to backend

**Set up API client**:

```text
Role: Frontend developer
Task: Create API client to connect frontend to backend
Constraints:
- Base URL configurable
- Methods for: health check, media, posts, schedules
- Error handling
- TypeScript types
- Follow existing patterns
Inputs: [Backend API endpoints]
Output format: API client with types
Evaluation: Can call backend endpoints successfully
```

## Testing

### Test health endpoint

```text
Role: Test engineer
Task: Write test for health endpoint
Constraints:
- Use [your testing framework]
- Test: GET /api/health returns 200
- Test: Response has correct structure
- Follow existing test patterns
Inputs: [Health endpoint code]
Output format: Test file
Evaluation: Test passes
```

### Test stub provider

```text
Role: Test engineer
Task: Write tests for stub provider
Constraints:
- Test: publish() returns external_id
- Test: get_status() returns status
- Test: failure simulation works
- Use [your testing framework]
Inputs: [Stub provider code]
Output format: Test file
Evaluation: All tests pass
```

## Verification checklist

Before moving to M2, verify:

- [ ] Backend runs and responds to health check
- [ ] Frontend runs and can call backend
- [ ] Database schema created and migrations work
- [ ] Stub provider implemented and tested
- [ ] Project structure is organized
- [ ] Development environment configured
- [ ] Basic tests pass

## Troubleshooting

### Issue: Backend won't start

**Solutions**:
- Check dependencies are installed
- Verify configuration files
- Check port isn't in use
- Review error logs

### Issue: Database connection fails

**Solutions**:
- Verify database is running
- Check connection string
- Verify credentials
- Check firewall/network

### Issue: Frontend can't reach backend

**Solutions**:
- Check CORS configuration
- Verify backend URL
- Check network/firewall
- Review API client setup

## Next steps

Once M1 is complete, proceed to **[M2: Core Posting Flows](./06.2-milestone-2-core-flows.md)**

## Deliverables

- Working project scaffold
- Health endpoint responding
- Database schema created
- Stub provider implemented
- Basic frontend-backend connection
- Tests passing

